# mock backend demo

This application will demo the use of an autogenerated (backend) API service, running in docker, based on a provided swagger file.
The set-up for this demo will feature the ```jormaechea/open-api-mocker``` OpenAPI mocker.
For demo purposes, the mocked backend will expose the infamous [Swagger Petstore](https://petstore.swagger.io/) API.
You will find the input 'swagger.json' file in the __mocked-backend__ directory, if you would like to extend or do alterations to the API.

A typical scenario for embedding a mock backend, is when your application needs to run integration tests,
and you do not have access to a running instance of the integrated service, but you do possess API documentation.

## Prerequisites

This demo requires that you have set up docker and docker compose.

## Current restrictions

The docker image will only interpret APIs in the swagger 3.0 JSON format.
I tend to use the [Swagger Editor](https://editor.swagger.io/) to convert from YAML to JSON and export it to the correct version.

## Running the mocked backend

Enter the __mock-backend__ directory and run ```docker-compose up```.

An instance of the mocked backend will be exposed on port 8080 on your localhost.

## First time setup

```
# install dependencies
make install
```

## Running the application

- Run the application with ```make run```.
The 'local' web application will be exposed on port 3000.

- Enter [http://localhost:3000/pet/0](http://localhost:3000/pet/0) in your favourite browser
You should expect to see the example response from your swagger documentation

If you forgot to run docker, or for some other reason is refused connection to the backend service, you may encounter this error message:
```{"status":"Get \"http://localhost:8080/v2/pet/12341234\": dial tcp [::1]:8080: connect: connection refused"}```

Please make sure your instance is running, and there is no conflict with other running instances.

## Additional resources

- [Go](https://go.dev/)
- [Gin Web Framework](https://github.com/gin-gonic/gin)
- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)
- [OpenAPI mocker](https://github.com/jormaechea/open-api-mocker)
- [Swagger](https://swagger.io/)